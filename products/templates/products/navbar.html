{% load static %}
{% load humanize %}
{% include "users/sidebar.html" %}

<nav style="background-color: #fff !important;" id="navbar"
     class=" navbar navbar-expand-lg navbar-light fixed-top mb-4">
    <div class="form-inline my-2 my-lg-0">
        <button style="float: left;" type="button" data-toggle="collapse"
                data-target="#navbarCollapse"
                data-trigger="#navbar_main" class="d-lg-none navbar-toggler collapsed"
                aria-expanded="false">
            <span class="navbar-toggler-icon"></span>
            <style>
                .navbar-toggler-icon {
                    display: inline-block;
                    width: 1em;
                    height: 1em;
                    vertical-align: middle;
                    content: "";
                    background: no-repeat center center;
                    background-size: 100% 100%;
                }
                .navbar-toggler {
                    padding: .15rem .55rem;
                    font-size: 1.25rem;
                    line-height: 1;
                    background-color: transparent;
                    border: 1px solid transparent;
                    border-radius: .25rem;
                }
            </style>
        </button>

        <a class="navbar-brand ml-3 d-fle d-none" href="{% url 'home' %}">
            <img src="{% static 'images/landkit theme.png' %}" width="50" height="50" alt="">

        </a>
        <a style="margin-left:7rem;" href="{% url 'home' %}" class="navbar-brand py-1 py-md-2 py-xl-1">
          <span class="d-none d-sm-flex flex-shrink-0 text-primary me-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="38" height="38"><path d="M36 18.01c0 8.097-5.355 14.949-12.705 17.2a18.12 18.12 0 0 1-5.315.79C9.622 36 2.608 30.313.573 22.611.257 21.407.059 20.162 0 18.879v-1.758c.02-.395.059-.79.099-1.185.099-.908.277-1.817.514-2.686C2.687 5.628 9.682 0 18 0c5.572 0 10.551 2.528 13.871 6.517 1.502 1.797 2.648 3.91 3.359 6.201.494 1.659.771 3.436.771 5.292z" fill="#bcac76"></path><g fill="#fff"><path d="M17.466 21.624c-.514 0-.988-.316-1.146-.829-.198-.632.138-1.303.771-1.501l7.666-2.469-1.205-8.254-13.317 4.621a1.19 1.19 0 0 1-1.521-.75 1.19 1.19 0 0 1 .751-1.521l13.89-4.818c.553-.197 1.166-.138 1.64.158a1.82 1.82 0 0 1 .85 1.284l1.344 9.183c.138.987-.494 1.994-1.482 2.33l-7.864 2.528-.375.04zm7.31.138c-.178-.632-.85-1.007-1.482-.81l-5.177 1.58c-2.331.79-3.28.02-3.418-.099l-6.56-8.412a4.25 4.25 0 0 0-4.406-1.758l-3.122.987c-.237.889-.415 1.777-.514 2.686l4.228-1.363a1.84 1.84 0 0 1 1.857.81l6.659 8.551c.751.948 2.015 1.323 3.359 1.323.909 0 1.857-.178 2.687-.474l5.078-1.54c.632-.178 1.008-.829.81-1.481z"></path><use href="#czlogo"></use><use href="#czlogo" x="8.516" y="-2.172"></use></g><defs><path id="czlogo" d="M18.689 28.654a1.94 1.94 0 0 1-1.936 1.935 1.94 1.94 0 0 1-1.936-1.935 1.94 1.94 0 0 1 1.936-1.935 1.94 1.94 0 0 1 1.936 1.935z"></path></defs></svg>
          </span>
          <h3 class="mt-2 font-shadow"
                style="color: black; font-family:
                        Florence;text-shadow: 1px 1px 1px grey;">
                <b>CSC 420 - SWE</b>
            </h3>
        </a>

        <style>
            .navbar-brand {
                align-items: center;
                display: inline-flex;
                font-weight: var(--cz-navbar-brand-font-weight);
            }
        </style>

    </div>
    <div class="form-inline my-2 my-lg-0">
    </div>
    <nav style="background-color: #fff !important;"
         id="navbar_main" class="mobile-offcanvas navbar navbar-expand-lg navbar-light ">
        <div class="offcanvas-header">
            <button class="btn btn-danger btn-sm btn-close float-right"> &times;</button>
            <div class="form-inline my-2 my-lg-0">
                {% if user.is_authenticated %}
                <a href="" class="text-decoration-none">
                    <img width="60px" height="60px" style="object-fit: cover; border-radius: 20px solid #ececec"
                         class="ml-1 border  rounded-circle account-img" alt="customer pics"
                         src="{{ request.user.vendor.image.url }}">
                    <small>{{user.username}}</small>
                </a>
                {% else %}
                <a href="{% url 'home' %}">
                    <h4 style="display: inline-block;float: left; margin-top: 7px;
                        text-shadow: 2px 1px 1px grey; font-family: Florence, cursive;
                        color: #333; font-size:2rem;">
                        <strong>CSC 420 - SOFTWARE ENGINEERING</strong>
                    </h4>
                </a>
                {% endif %}
            </div>
        </div>
        <hr class="my-3">
        <div class="d-lg-none">
            <ul class="navbar-nav">
                {% if user.is_authenticated %}
                <li class="nav-item active"><a class="nav-link" href="{% url 'home' %}">HOME </a></li>
                <li class="nav-item"><a class="nav-link" href=""> ABOUT US </a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'checkout' %}"> CHECKOUT </a></li>
                <li class="nav-item"><a class="nav-link" href=""> PROFILE </a></li>

                <li class="nav-item"><a class="nav-success btn btn-block btn-warning" href="{% url 'logout' %}">
                    LOGOUT </a></li>
                {% else %}
                <li class="nav-item active"><a class="nav-link" href="{% url 'home' %}">HOME </a></li>
                <li class="nav-item"><a class="nav-link" href=""> ABOUT US </a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'checkout' %}"> CHECKOUT </a></li>
                <li class="nav-item"><a class="nav-link mb-2" href="{% url 'login' %}"> LOGIN </a></li>

                <li class="nav-item"><a class="nav-warning btn-block btn btn-warning" href="">
                    SIGNUP </a></li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <style>
        @media only screen and (max-width: 1000px) {
            .hide_nav,  {
                display: none;
            }
        }


    </style>
    <div class="navbar-collapse mr-auto order-lg-2 collapse hide_nav" id="navbarCollapse" style="">
        <hr class="my-3">
        <!-- Primary menu-->
        <ul class="navbar-nav">
            <div class="d-inline">
                <ul class="navbar-nav mt-3 mr-auto ml-2">

                    <li class="nav-item active">
                        <a href="{% url 'home' %}" id="nav-link" class="nav-link">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a href="" class="nav-link">ABOUT</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'products' %}" class="nav-link">MARKET</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'checkout' %}" class="nav-link">CHECKOUT</a>
                    </li>
                    <li class="nav-item">
                        <button type="button" data-target="#kt_header_search_modal"
                                class="nav-success btn btn-outline-secondary mr-sm-2"
                                data-toggle="modal">
                            <svg width="1em" height="1em" viewBox="0 0 16 16"
                                 class="bi bi-search" fill="currentColor"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                      d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"/>
                                <path fill-rule="evenodd"
                                      d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
                            </svg>
                        </button>
                    </li>
                    <li class="nav-item dropdown ">
                        <a onclick="openNav()" data-href="#" class="nav-link bell-btn" id="bi-bell" role="button"
                           aria-haspopup="true" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1.5em"
                                 height="1.5em" class="bi bi-bell" viewBox="0 0 16 16">
                                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                            </svg>
                            <!-- Counter - Alerts -->

                            <span class="badge badge-animation badge_ badge-danger badge-counter" id="counter">
                                {% if notification_count > 15 %}
                                <small id="noti_count" class="noti_count">15+</small>
                                {% else %}
                                {{ notification_count|add:get_cart_items|intword }}
                                {% endif %}
                            </span>
                        </a>
                        <style>
                            .dropdown-menu {
                                overflow-y: auto;
                                max-height: calc(100% + 30rem);
                            }
                            .bi-box .bi-bell .bi {
                                position:relative;
                            }
                            .badge_ {
                                border-radius:24px;
                                position:absolute;
                                top:3px;
                                right:1px;
                            }
                            .badge-animation {
                              animation: zoom-in-zoom-out 1s ease infinite;
                            }

                            @keyframes zoom-in-zoom-out {
                              0% {
                                transform: scale(1, 1);
                              }
                              50% {
                                transform: scale(1.5, 1.5);
                              }
                              100% {
                                transform: scale(1, 1);
                              }
                            }

                        </style>


                    </li>

                    <li class="nav-item mb-2" style="margin-right:6rem">
                        <a class="nav-link mb-2" id="navbarDropdown" role="button" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">
                            <img src="{% static 'images/user.png' %}" width="35" height="35"
                                 class="rounded-circle mr-2  user-image" alt="">

                            <div style="width: 15rem;"
                                 class="dropdown-list dropdown-menu dropdown-menu-right shadow fade_ animated--grow-in"
                                 aria-labelledby="navbarDropdown">
                                <br>
                                <div align="center" class=" align-items-center mt-0 ml-3">
                                    <img src="{% static 'images/user.png' %}" width="65" height="65"
                                         class="rounded-circle user-image" alt="">
                                    <h5 class="mb-1">{{ request.user }}</h5>
                                    <p style="font-size: 12px">Client</p>
                                </div>

                                <hr class="my-1">
                                <a class="dropdown-item d-flex align-items-center" href="{% url 'user_orders' %}">
                                    <div class="small text-gray-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19"
                                             fill="currentColor" class="bi bi-archive mr-2" viewBox="0 0 16 16">
                                            <path d="M0 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 12.5V5a1 1 0 0 1-1-1zm2 3v7.5A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5V5zm13-3H1v2h14zM5 7.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
                                        </svg>
                                    </div>
                                    <span class="font-weight-weak">
                                        Previous Orders
                                    </span>
                                </a>
                                <hr class="my-1">
                                <a class="dropdown-item d-flex align-items-center" href="{% url 'logout' %}">
                                    <div class="small text-gray-500">
                                        <img src="{% static 'images/log-out.png' %}" width="19" height="19"
                                             class="rounded-circle user-image mr-2" alt="">
                                    </div>
                                    <span class="font-weight-weak">
                                         Logout
                                    </span>
                                </a>
                            </div>
                        </a>

                    </li>

                </ul>
            </div>
        </ul>
    </div>
</nav>
<style>
    .fade_ {
        animation-name: dropdownAnimation;
        animation-duration: 0.5s;
        animation-iteration-count: 1;
        animation-timing-function: ease;
        animation-fill-mode: forwards;
    }
    @keyframes dropdownAnimation {
        0% {
            opacity: 0;
            transform: translateY(58px);
        }
        100% {
            opacity: 1;
            transform: translateY(0px);
        }
    }

    .dropdown-menu {
        top: 70px;
        right: 10px;

    }

</style>
<script type="text/javascript">
    /// some script

    // jquery ready start
    $(document).ready(function() {
        // jQuery code


        $("[data-trigger]").on("click", function(e){
            e.preventDefault();
            e.stopPropagation();
            var offcanvas_id =  $(this).attr('data-trigger');
            $(offcanvas_id).toggleClass("show");
            $('body').toggleClass("offcanvas-active");
            $(".screen-overlay").toggleClass("show");
        });

           // Close menu when pressing ESC
        $(document).on('keydown', function(event) {
            if(event.keyCode === 27) {
               $(".mobile-offcanvas").removeClass("show");
               $("body").removeClass("overlay-active");
            }
        });

        $(".btn-close, .screen-overlay").click(function(e){
            $(".screen-overlay").removeClass("show");
            $(".mobile-offcanvas").removeClass("show");
            $("body").removeClass("offcanvas-active");


        });


    }); // jquery end

</script>
<script>
    // When the user scrolls down 80px from the top of the document, resize the navbar's padding and the logo's font size
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
      if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
        document.getElementById("navbar").style.background = "#fff";
        document.getElementById("navbar").style.boxShadow = "hsl(0, 0%, 80%) 0 0 16px";
        document.getElementById("brand-name").style.color = "#000";

      } else {
        document.getElementById("navbar").style.boxShadow = "none";
        document.getElementById("navbar").style.background = "#fff";
        document.getElementById("brand-name").style.color = "#fff";


      }
    }

</script>

<style type="text/css">
    body.offcanvas-active{
        overflow:hidden;
    }
    .offcanvas-header{ display:none; }
    .screen-overlay {
      width:0%;
      height: 100%;
      z-index: 30;
      position: fixed;
      top: 0;
      left: 0;
      opacity:0;
      visibility:hidden;
      background-color: rgba(34, 34, 34, 0.6);
      transition:opacity .2s linear, visibility .1s, width 1s ease-in;
       }
    .screen-overlay.show {
        transition:opacity .5s ease, width 0s;
        opacity:1;
        width:100%;
        visibility:visible;
    }

    @media all and (max-width:992px) {

        .offcanvas-header{ display:block; }

        .mobile-offcanvas{
            visibility: hidden;
            transform:translateX(-100%);
            border-radius:0;
            display:block;
            position: fixed;
            top: 0; left:0;
            height: 100%;
            z-index: 1200;
            width:80%;
            overflow-y: scroll;
            overflow-x: hidden;
            transition: visibility .2s ease-in-out, transform .2s ease-in-out;
        }

        .mobile-offcanvas.show{
            visibility: visible;
            transform: translateX(0);
        }
    }

    .get {
        display: flex;
    }
    @media (min-width: 48em) {
        .get {
        visibility: hidden;
        }
    }
    body {
      padding-top: 3rem;
      padding-bottom: 0rem;
      color: #5a5a5a;
      overflow-x: hidden;
    }
</style>
<div class="modal bg-white fade show" id="kt_header_search_modal" aria-hidden="true"
     aria-modal="true" >
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content align-items-center justify-content-center" style="border: 0!important; width: 60rem; right:12rem;">
            <div class="container">
                <div class="modal-header d-flex justify-content-end">
                    <!--begin::Close-->
                    <div data-dismiss="modal" aria-label="Close" style="cursor: pointer">
                        <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                        <span class="svg-icon svg-icon-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="#fff">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black"></rect>
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black"></rect>
                            </svg>
                        </span>
                    </div>
                </div>
                <div class="modal-body">
                    <!--begin::Search-->
                    <form action="{% url 'search' %}" class="d-flex pb-10" autocomplete="on" method="GET" value="{{request.GET.q}}">
                        <input value="{{request.GET.q}}" autofocus="" type="text"
                               class="form-control bg-transparent border-0 fs-4x text-center fw-normal"
                               name="q" placeholder="Search...">
                        <div class="autocomplete" style="width:300px; display:none;">
                            <input type="submit" name="submit" value="Search"/>
                        </div>
                    </form>
                    <br>
                    <br>

                    <h4 class="text-dark mt-3 mb-3"><b>Popular search</b></h4>
                    <!--begin::List Widget 5-->

                    <!--begin::Item-->
                    <div class="d-flex mb-6">
                        <!--begin::Icon-->
                        <div class="me-1">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr071.svg-->
                            <span class="svg-icon svg-icon-sm svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358
                                    17.1642 8.0358 17.8358 8.45001 18.25C8.86423
                                    18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z" fill="black"></path>
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                        <!--end::Icon-->
                        <!--begin::Content-->
                        <div class="d-flex flex-column">
                            <a href="/search/?q=Wristwatch&submit=Search" class="fs-6 fw-bolder text-hover-primary text-gray-800 mb-2">
                                Wristwatch</a>
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <div class="d-flex mb-6">
                        <!--begin::Icon-->
                        <div class="me-1">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr071.svg-->
                            <span class="svg-icon svg-icon-sm svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z" fill="black"></path>
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                        <!--end::Icon-->
                        <!--begin::Content-->
                        <div class="d-flex flex-column">
                            <a href="/search/?q=Phones&submit=Search" class="fs-6 fw-bolder text-hover-primary text-gray-800 mb-2">
                                Phones</a>
                        </div>
                        <!--end::Content-->
                    </div>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <div class="d-flex mb-6">
                        <!--begin::Icon-->
                        <div class="me-1">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr071.svg-->
                            <span class="svg-icon svg-icon-sm svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z" fill="black"></path>
                                </svg>
                            </span>
                            <!--end::Svg Icon-->
                        </div>
                        <!--end::Icon-->
                        <!--begin::Content-->
                        <div class="d-flex flex-column">
                            <a href="/search/?q=Jacket&submit=Search" class="fs-6 fw-bolder text-hover-primary text-gray-800 mb-2">
                                Jacket</a>
                        </div>
                        <!--end::Content-->
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
